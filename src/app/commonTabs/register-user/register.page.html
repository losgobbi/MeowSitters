<ion-header [translucent]="true">
</ion-header>
<ion-content [fullscreen]="true">
  <ion-card>
    <ion-card-header>
      <img src="../../../assets/imgs/home.png" style="display: block; margin-left: auto; margin-right: auto;">
    </ion-card-header>
    <ion-card-content>
      <form (ngSubmit)="finishRegister()" [formGroup]="registerForm">
        <ion-list lines="full" class="ion-no-margin ion-no-padding">
          <ion-label>E-mail</ion-label>
          <ion-item>
            <ion-label>{{login.login}}</ion-label>
            </ion-item>
            <ion-item>
              <ion-label position="floating">Nome Completo</ion-label>
              <ion-input formControlName="name" type="text" [value]="registerForm.get('name').value | titlecase"></ion-input>
            </ion-item>
            <p slot="end" *ngIf="registerForm.get('name').errors && registerForm.get('name').dirty">Nome não é válido.</p>
            <ion-item>
              <ion-label position="floating">Repetir Senha</ion-label>
              <ion-input formControlName="verifypassword"  type="password"></ion-input>
            </ion-item>
            <p slot="end" *ngIf="registerForm.get('verifypassword').errors && registerForm.get('verifypassword').dirty">
              Senha não é válida.
            </p>
            <p slot="end" *ngIf="registerForm.get('verifypassword').hasError('notEqual') &&  registerForm.get('verifypassword').dirty">
              Senha não é igual a anterior.
            </p>
            <p slot="end" *ngIf="registerForm.get('verifypassword').hasError('hasCapitalCase') &&  registerForm.get('verifypassword').dirty">
              Senha deve possuir uma letra maiúscula.
            </p>
            <p slot="end" *ngIf="registerForm.get('verifypassword').hasError('hasMinimalLen') &&  registerForm.get('verifypassword').dirty">
              Senha deve possuir no mínimo 8 caracteres.
            </p>
            <ion-item>
              <ion-label position="floating">Digite o seu CEP</ion-label>
              <ion-input formControlName="cep" type="text" maxlength="8" [value]="registerForm.get('cep').value"></ion-input>
            </ion-item>
            <p slot="end" *ngIf="registerForm.get('cep').errors && registerForm.get('cep').dirty">CEP não é válido.</p>
            <ion-item *ngIf="fetchedCEP">
              <ion-label>Estado</ion-label>
              <ion-item>
                <ion-label>{{addr.state}}</ion-label>
              </ion-item>
            </ion-item>
            <ion-item *ngIf="fetchedCEP">
              <ion-label>Bairro</ion-label>
              <ion-item>
                <ion-label>{{addr.neighborhood}}</ion-label>
              </ion-item>
            </ion-item>
            <ion-item *ngIf="fetchedCEP">
              <ion-label>Cidade</ion-label>
              <ion-item>
                <ion-label>{{addr.city}}</ion-label>
              </ion-item>
            </ion-item>
            <ion-item *ngIf="fetchedCEP">
              <ion-label>Rua</ion-label>
              <ion-item>
                <ion-label>{{addr.street}}</ion-label>
              </ion-item>
            </ion-item>
            <ion-item *ngIf="fetchedCEP">
              <ion-label position="floating">Digite o número do endereço</ion-label>
              <ion-input formControlName="addrnumber" type="text" [value]="registerForm.get('addrnumber').value"></ion-input>
            </ion-item>
            <p slot="end" *ngIf="registerForm.get('addrnumber').errors && registerForm.get('addrnumber').dirty">Número não é válido.</p>
            <ion-item *ngIf="fetchedCEP">
              <ion-label position="floating">Digite complemento do endereço</ion-label>
              <ion-input formControlName="addrcompl" type="text" [value]="registerForm.get('addrcompl').value"></ion-input>
            </ion-item>
        </ion-list>
        <div class="spacer" style="height: 10px;"></div>
        <ion-button expand="block" type="submit" class="ion-no-margin" disabled="{{!registerForm.valid}}" color="sitters">REGISTRAR</ion-button>
      </form>
      <div class="spacer" style="height: 10px;"></div>
      <ion-button expand="block" type="submit" class="ion-no-margin" (click)="dismiss()" color="sitters">CANCELAR</ion-button>
  </ion-card-content>
</ion-card>
</ion-content>